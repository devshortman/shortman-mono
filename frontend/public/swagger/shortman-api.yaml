swagger: "2.0"
info:
  title: "ShortMan íŠ¸ë Œë“œ ìˆí¼ API"
  description: |
    í™ˆ í˜ì´ì§€ì— ë…¸ì¶œë˜ëŠ” í•œêµ­/í•´ì™¸/ì¤‘êµ­ ìˆí¼ íŠ¸ë Œë“œ ë¦¬ìŠ¤íŠ¸ ë°
    ì¢‹ì•„ìš”Â·ë¶ë§ˆí¬Â·ëŒ“ê¸€ ê´€ë ¨ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” API ëª…ì„¸ì„œ.
  version: "1.1.0"

host: "host.location"
basePath: "/api"
schemes:
  - https
  - http

paths:
  /trends:
    get:
      summary: "ì§€ì—­ë³„ ìˆí¼ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ"
      description: |
        í™ˆ í™”ë©´ì˜ íŠ¸ë Œë“œ ìˆí¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ì§€ì—­(region)ë³„ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤.  
        ê° ìš”ì²­ì€ 16ê°œì˜ ìˆí¼ì„ ë°˜í™˜í•˜ë©°,  
        í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” í•œêµ­ / í•´ì™¸ / ì¤‘êµ­ 3ê°œì˜ ìš”ì²­ì„ ë³‘ë ¬ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.
      parameters:
        - name: region
          in: query
          required: true
          type: string
          enum: [korea, global, china]
          description: "ì¡°íšŒí•  ì§€ì—­ëª… (í•œêµ­: korea, í•´ì™¸: global, ì¤‘êµ­: china)"
        - name: limit
          in: query
          required: false
          type: integer
          default: 16
          description: "í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¬ ìˆí¼ ê°œìˆ˜ (ê¸°ë³¸ê°’ 16)"
        - name: page
          in: query
          required: false
          type: integer
          default: 1
          description: "í˜ì´ì§€ ë²ˆí˜¸ (í˜ì´ì§• ë˜ëŠ” ì¸í”¼ë‹ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œ ì‚¬ìš©)"
      responses:
        200:
          description: "ìš”ì²­í•œ ì§€ì—­ì˜ íŠ¸ë Œë“œ ìˆí¼ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜"
          schema:
            type: object
            properties:
              region:
                type: string
                example: "korea"
              totalCount:
                type: integer
                example: 160
              shorts:
                type: array
                items:
                  $ref: "#/definitions/Short"

  /shorts/{id}/like:
    post:
      summary: "ì¢‹ì•„ìš”/ì¢‹ì•„ìš” ì·¨ì†Œ"
      description: "ì¢‹ì•„ìš” ë²„íŠ¼ì„ í† ê¸€í•©ë‹ˆë‹¤. (like/unlike)"
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          required: true
          schema:
            type: object
            properties:
              userId:
                type: string
              action:
                type: string
                enum: [toggle, like, unlike]
      responses:
        200:
          description: "ì¢‹ì•„ìš” ìƒíƒœ ë° ê°œìˆ˜ ì—…ë°ì´íŠ¸"
          schema:
            type: object
            properties:
              id:
                type: string
              liked:
                type: boolean
              likes:
                type: integer

  /shorts/{id}/bookmark:
    post:
      summary: "ë¶ë§ˆí¬/ë¶ë§ˆí¬ ì·¨ì†Œ"
      description: "ë¶ë§ˆí¬ ë²„íŠ¼ì„ í† ê¸€í•©ë‹ˆë‹¤."
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          required: true
          schema:
            type: object
            properties:
              userId:
                type: string
              action:
                type: string
                enum: [toggle]
      responses:
        200:
          description: "ë¶ë§ˆí¬ ìƒíƒœ ì—…ë°ì´íŠ¸"
          schema:
            type: object
            properties:
              id:
                type: string
              bookmarked:
                type: boolean

  /shorts/{id}/comment:
    post:
      summary: "ëŒ“ê¸€ ì‘ì„±"
      description: "íŠ¹ì • ìˆí¼ì— ëŒ“ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤."
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          required: true
          schema:
            type: object
            properties:
              userId:
                type: string
              comment:
                type: string
      responses:
        200:
          description: "ëŒ“ê¸€ ì‘ì„± ì„±ê³µ"
          schema:
            $ref: "#/definitions/Comment"
            
  /trends/category:
    get:
      summary: "ì¹´í…Œê³ ë¦¬ë³„ ìˆí¼ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ"
      description: |
        ì„ íƒí•œ ì§€ì—­(region)ê³¼ ì¹´í…Œê³ ë¦¬(category)ì— ë”°ë¼ ìˆí¼ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.  
        í•œêµ­ / í•´ì™¸ / ì¤‘êµ­ ì„¹ì…˜ ë‚´ì—ì„œ 'ì „ì²´', 'ë§˜í”Œ', 'ë¨¹í”Œ', 'í—¬í”Œ', 'ê¸°íƒ€' ë“±ì„ ì„ íƒí–ˆì„ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.
      parameters:
        - name: region
          in: query
          required: true
          type: string
          enum: [korea, global, china]
          description: "ì¡°íšŒí•  ì§€ì—­ëª… (í•œêµ­: korea, í•´ì™¸: global, ì¤‘êµ­: china)"
        - name: category
          in: query
          required: false
          type: string
          enum: [all, parent, eat, health, etc]
          description: "ì¡°íšŒí•  ì¹´í…Œê³ ë¦¬ (ì „ì²´, ë§˜í”Œ, ë¨¹í”Œ, í—¬í”Œ, ê¸°íƒ€)"
        - name: limit
          in: query
          required: false
          type: integer
          default: 16
          description: "í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¬ ìˆí¼ ê°œìˆ˜ (ê¸°ë³¸ê°’ 16)"
        - name: page
          in: query
          required: false
          type: integer
          default: 1
          description: "í˜ì´ì§€ ë²ˆí˜¸ (í˜ì´ì§• ë˜ëŠ” ì¸í”¼ë‹ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œ ì‚¬ìš©)"
      responses:
        200:
          description: "ìš”ì²­í•œ ì§€ì—­ ë° ì¹´í…Œê³ ë¦¬ì˜ ìˆí¼ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜"
          schema:
            type: object
            properties:
              region:
                type: string
                example: "korea"
              category:
                type: string
                example: "eat"
              totalCount:
                type: integer
                example: 160
              shorts:
                type: array
                items:
                  $ref: "#/definitions/Short"

  /shorts/{id}/comments:
    get:
      summary: "ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ"
      description: "íŠ¹ì • ìˆí¼ì˜ ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤."
      parameters:
        - name: id
          in: path
          required: true
          type: string
      responses:
        200:
          description: "ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜"
          schema:
            type: object
            properties:
              shortId:
                type: string
              comments:
                type: array
                items:
                  $ref: "#/definitions/Comment"

  /search:
    get:
      summary: "í†µí•© ê²€ìƒ‰"
      description: "í‚¤ì›Œë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëª¨ë“  ìˆí¼ì—ì„œ ì œëª©, ì„¤ëª…, ë‹‰ë„¤ì„ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤."
      parameters:
        - name: keyword
          in: query
          required: true
          type: string
          description: "ê²€ìƒ‰í•  í‚¤ì›Œë“œ (ì˜ˆ: 'ë‹¤ì´ì†Œ', 'ì£¼ë°©ìš©í’ˆ')"
        - name: limit
          in: query
          required: false
          type: integer
          default: 20
          description: "í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¬ ê²€ìƒ‰ ê²°ê³¼ ìˆ˜"
        - name: page
          in: query
          required: false
          type: integer
          default: 1
          description: "í˜ì´ì§€ ë²ˆí˜¸"
      responses:
        200:
          description: "ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜"
          schema:
            type: object
            properties:
              totalCount:
                type: integer
                example: 100
              results:
                type: array
                items:
                  $ref: "#/definitions/Short"

  /search/category:
    get:
      summary: "ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰"
      description: "íŠ¹ì • ì¹´í…Œê³ ë¦¬ì—ì„œ í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤."
      parameters:
        - name: category
          in: query
          required: true
          type: string
          enum: [all, parent, eat, health, etc]
          description: "ê²€ìƒ‰í•  ì¹´í…Œê³ ë¦¬"
        - name: keyword
          in: query
          required: true
          type: string
          description: "ê²€ìƒ‰ í‚¤ì›Œë“œ"
      responses:
        200:
          description: "ì¹´í…Œê³ ë¦¬ ë‚´ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜"
          schema:
            type: object
            properties:
              category:
                type: string
              totalCount:
                type: integer
              results:
                type: array
                items:
                  $ref: "#/definitions/Short"

  /search/country:
    get:
      summary: "êµ­ê°€ë³„ ê²€ìƒ‰"
      description: "íŠ¹ì • êµ­ê°€(region) ë‚´ì—ì„œ í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤."
      parameters:
        - name: region
          in: query
          required: true
          type: string
          enum: [korea, global, china]
          description: "ê²€ìƒ‰í•  ì§€ì—­ëª… (í•œêµ­: korea, í•´ì™¸: global, ì¤‘êµ­: china)"
        - name: keyword
          in: query
          required: true
          type: string
          description: "ê²€ìƒ‰ í‚¤ì›Œë“œ"
      responses:
        200:
          description: "êµ­ê°€ë³„ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜"
          schema:
            type: object
            properties:
              region:
                type: string
              totalCount:
                type: integer
              results:
                type: array
                items:
                  $ref: "#/definitions/Short"

definitions:
  Short:
    type: object
    properties:
      id:
        type: string
        example: "abc123"
      avatar:
        type: string
        format: uri
        example: "https://cdn.shortman.com/avatar1.png"
      nickname:
        type: string
        example: "lish.wist"
      thumbnail:
        type: string
        format: uri
        example: "https://cdn.shortman.com/thumb1.jpg"
      source:
        type: string
        format: uri
        example: "https://ìœ íŠœë¸Œ, ì¸ìŠ¤íƒ€, í‹±í†¡"
      description:
        type: string
        example: "ë„ë§ˆê½‚ì´ë¡œ ë„ë§ˆë§Œ ê½‚ìœ¼ì‹œë‚˜ìš”ğŸ¥º ..."
      likes:
        type: integer
        example: 6102000
      comments:
        type: integer
        example: 123
      bookmarked:
        type: boolean
        example: false
      liked:
        type: boolean
        example: true
      video_url:
        type: string
        format: uri
        example: "https://cdn.shortman.com/video1.mp4"

  ShortDetail:
    allOf:
      - $ref: "#/definitions/Short"
      - type: object
        properties:
          createdAt:
            type: string
            format: date-time
          updatedAt:
            type: string
            format: date-time

  Comment:
    type: object
    properties:
      commentId:
        type: string
        example: "cmt_456"
      nickname:
        type: string
        example: "lish.wist"
      avatar:
        type: string
        format: uri
        example: "https://cdn.shortman.com/avatar1.png"
      comment:
        type: string
        example: "ë„ë§ˆê½‚ì´ ë„ˆë¬´ ê·€ì—¬ì›Œìš”!"
      createdAt:
        type: string
        format: date-time