# ğŸš€ ShortMan ë°°í¬ ê°€ì´ë“œ (ì™„ì „íŒ)

## ğŸ“¦ ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] CSS íŒŒì¼ ìœ„ì¹˜ ìˆ˜ì •ë¨
- [ ] GitHub Actions ì¶”ê°€
- [ ] í”„ë¡ íŠ¸ì—”ë“œ API URL í™˜ê²½ ë³€ìˆ˜í™”
- [ ] ë°±ì—”ë“œ CORS ì„¤ì • ì—…ë°ì´íŠ¸
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

---

## 1ï¸âƒ£ íŒŒì¼ ì¶”ê°€/ìˆ˜ì •

### ì¶”ê°€í•  íŒŒì¼ (4ê°œ)

#### 1. GitHub Actions ì›Œí¬í”Œë¡œìš°
```bash
ìœ„ì¹˜: .github/workflows/daily-crawl.yml
ì—­í• : ë§¤ì¼ ì˜¤ì „ 9ì‹œ ìë™ í¬ë¡¤ë§
```

#### 2. í”„ë¡ íŠ¸ì—”ë“œ API ì„¤ì •
```bash
ìœ„ì¹˜: frontend/src/config/api.ts
ì—­í• : í™˜ê²½ë³„ API URL ê´€ë¦¬
```

#### 3. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼
```bash
ìœ„ì¹˜: frontend/.env.production
ë‚´ìš©:
VITE_API_BASE_URL=https://short-man-backend.onrender.com
VITE_APP_ENV=production
```

#### 4. Render ì„¤ì • (ì„ íƒ)
```bash
ìœ„ì¹˜: render.yaml (ë£¨íŠ¸)
ì—­í• : Render.com ìë™ ë°°í¬
```

---

### ìˆ˜ì •í•  íŒŒì¼ (2ê°œ)

#### 5. home.tsx
```typescript
// ê¸°ì¡´
'http://localhost:8000/api/v1/shorts/regional'

// ë³€ê²½
import { API_ENDPOINTS } from '../../config/api';
`${API_ENDPOINTS.REGIONAL_SHORTS}?limit_per_region=12`
```

#### 6. main.py (CORS)
```python
# ê¸°ì¡´
allow_origins=["*"]

# ë³€ê²½
ALLOWED_ORIGINS = [
    "http://localhost:5173",
    "https://devhortman.github.io",  # âš ï¸ ë³¸ì¸ GitHub ê³„ì •ëª…!
]
```

---

## 2ï¸âƒ£ GitHub ì„¤ì •

### Secrets ë“±ë¡

1. **GitHub Repository â†’ Settings â†’ Secrets and variables â†’ Actions**
2. **New repository secret** í´ë¦­
3. ë‹¤ìŒ 2ê°œ ì¶”ê°€:

```
Name: SUPABASE_URL
Value: https://your-project.supabase.co

Name: SUPABASE_SERVICE_ROLE_KEY
Value: eyJ... (Service Role Key)
```

### Actions í™œì„±í™”

1. **GitHub Repository â†’ Actions íƒ­**
2. **I understand my workflows, go ahead and enable them** í´ë¦­
3. **Daily Shorts Crawler** ì›Œí¬í”Œë¡œìš° í™•ì¸

---

## 3ï¸âƒ£ ë°±ì—”ë“œ ë°°í¬ (Render.com)

### ë°©ë²• 1: Render Dashboard (ì¶”ì²œ)

1. **Render.com ì ‘ì†** â†’ New â†’ Web Service
2. **Connect Repository**: GitHubì—ì„œ `shortman-mono` ì„ íƒ
3. **ì„¤ì •:**
   ```
   Name: short-man-backend
   Region: Oregon (ë˜ëŠ” Singapore)
   Branch: main
   Root Directory: backend/backend
   Environment: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: uvicorn app.main:app --host 0.0.0.0 --port $PORT
   ```
4. **í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:**
   ```
   APP_ENV = prod
   SUPABASE_URL = https://...
   SUPABASE_SERVICE_ROLE_KEY = eyJ...
   ```
5. **Create Web Service** í´ë¦­

### ë°©ë²• 2: render.yaml (ìë™)

1. ë£¨íŠ¸ì— `render.yaml` ì¶”ê°€
2. Git pushí•˜ë©´ ìë™ ë°°í¬
3. Render Dashboardì—ì„œ í™˜ê²½ ë³€ìˆ˜ë§Œ ì¶”ê°€

### ë°°í¬ í™•ì¸

```bash
# Health Check
curl https://short-man-backend.onrender.com/health

# Response
{"status": "ok", "env": "prod"}

# API í…ŒìŠ¤íŠ¸
curl https://short-man-backend.onrender.com/api/v1/shorts/regional?limit_per_region=12
```

---

## 4ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ (GitHub Pages)

### ë¹Œë“œ ì „ ì„¤ì •

1. **vite.config.ts í™•ì¸:**
```typescript
export default defineConfig({
  base: '/short-man/',  // âš ï¸ Repository ì´ë¦„ê³¼ ë™ì¼!
  // ...
})
```

2. **package.json ìŠ¤í¬ë¦½íŠ¸:**
```json
{
  "scripts": {
    "build": "tsc && vite build",
    "deploy": "npm run build && gh-pages -d dist"
  }
}
```

### ë°°í¬ ì‹¤í–‰

```bash
cd frontend

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ë¹Œë“œ (í”„ë¡œë•ì…˜ í™˜ê²½ ë³€ìˆ˜ ìë™ ë¡œë“œ)
npm run build

# GitHub Pages ë°°í¬
npm install -D gh-pages
npm run deploy

# ë˜ëŠ” ìˆ˜ë™
npx gh-pages -d dist
```

### GitHub Pages í™œì„±í™”

1. **GitHub Repository â†’ Settings â†’ Pages**
2. **Source**: Deploy from a branch
3. **Branch**: `gh-pages` / `root`
4. **Save**

### ë°°í¬ URL

```
https://devhortman.github.io/short-man/
```

---

## 5ï¸âƒ£ ìµœì¢… í™•ì¸

### ë°±ì—”ë“œ ì²´í¬

```bash
# 1. Health Check
curl https://short-man-backend.onrender.com/health

# 2. API ë™ì‘
curl https://short-man-backend.onrender.com/api/v1/shorts/regional?limit_per_region=12

# 3. Swagger UI
https://short-man-backend.onrender.com/docs
```

### í”„ë¡ íŠ¸ì—”ë“œ ì²´í¬

1. **ë¸Œë¼ìš°ì € ì ‘ì†:**
   ```
   https://devhortman.github.io/short-man/
   ```

2. **ê°œë°œì ë„êµ¬ (F12) â†’ Console í™•ì¸:**
   ```
   [API Config] Environment: production
   [API Config] Base URL: https://short-man-backend.onrender.com
   ```

3. **ë™ì‘ í™•ì¸:**
   - [ ] ë°°ë„ˆ í‘œì‹œ
   - [ ] 3ê°œ ì„¹ì…˜ (í•œêµ­/í•´ì™¸/ì¤‘êµ­)
   - [ ] ê° ì„¹ì…˜ 12ê°œ ì¹´ë“œ
   - [ ] ì¹´ë“œ í´ë¦­ ì‹œ ìƒˆ íƒ­ ì´ë™
   - [ ] ë°˜ì‘í˜• ë™ì‘ (ëª¨ë°”ì¼ í™•ì¸)

### GitHub Actions ì²´í¬

1. **GitHub â†’ Actions íƒ­**
2. **Daily Shorts Crawler** ì›Œí¬í”Œë¡œìš°
3. **Run workflow** ë²„íŠ¼ìœ¼ë¡œ ìˆ˜ë™ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
4. **ë¡œê·¸ í™•ì¸:**
   ```
   âœ… Crawler Finished!
   ğŸ“¥ Total collected: 36
   âœ¨ Newly saved: 36
   ```

---

## 6ï¸âƒ£ í¬ë¡¤ëŸ¬ ìŠ¤ì¼€ì¤„ ì„¤ì •

### GitHub Actions (ì¶”ì²œ)

**ì¥ì :**
- ì™„ì „ ë¬´ë£Œ
- í•˜ë£¨ 1íšŒ ìë™ ì‹¤í–‰ (ì˜¤ì „ 9ì‹œ KST)
- ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

**ì„¤ì •:**
- ì´ë¯¸ `.github/workflows/daily-crawl.yml`ì— ì„¤ì •ë¨
- Secretsë§Œ ë“±ë¡í•˜ë©´ ìë™ ë™ì‘

### Render Cron Job (ì„ íƒ)

**ì¥ì :**
- ë°±ì—”ë“œì™€ ê°™ì€ ê³³ì—ì„œ ê´€ë¦¬

**ë‹¨ì :**
- ìœ ë£Œ ($7/ì›”)

**ì„¤ì •:**
- `render.yaml`ì˜ ì£¼ì„ í•´ì œ
- Cron Job íƒ€ì…ìœ¼ë¡œ ë°°í¬

**ê¶Œì¥:** GitHub Actions ì‚¬ìš© (ë¬´ë£Œ)

---

## 7ï¸âƒ£ í™˜ê²½ë³„ ì„¤ì • ìš”ì•½

### ë¡œì»¬ ê°œë°œ

```bash
# ë°±ì—”ë“œ
cd backend/backend
python simple_crawler.py
uvicorn app.main:app --reload

# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm run dev

# API URL
http://localhost:8000
```

### í”„ë¡œë•ì…˜

```bash
# ë°±ì—”ë“œ
https://short-man-backend.onrender.com

# í”„ë¡ íŠ¸ì—”ë“œ
https://devhortman.github.io/short-man/

# í¬ë¡¤ëŸ¬
GitHub Actions (ìë™, í•˜ë£¨ 1íšŒ)
```

---

## 8ï¸âƒ£ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: CORS ì—ëŸ¬

```
Access to fetch at 'https://...' has been blocked by CORS policy
```

**í•´ê²°:**
1. `backend/backend/app/main.py` CORS ì„¤ì • í™•ì¸
2. GitHub Pages URLì´ `allow_origins`ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
3. Render ì¬ë°°í¬

### ë¬¸ì œ 2: API ì—°ê²° ì‹¤íŒ¨

```
Failed to fetch
```

**í•´ê²°:**
1. ë°±ì—”ë“œ Health Check: `https://short-man-backend.onrender.com/health`
2. Render ë¡œê·¸ í™•ì¸
3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í™•ì¸

### ë¬¸ì œ 3: GitHub Actions ì‹¤íŒ¨

```
Missing Supabase environment keys
```

**í•´ê²°:**
1. GitHub Secrets ë“±ë¡ í™•ì¸
2. Secret ì´ë¦„ ì •í™•íˆ í™•ì¸:
   - `SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY`

### ë¬¸ì œ 4: í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì‹¤íŒ¨

```
Module not found: Can't resolve '../../config/api'
```

**í•´ê²°:**
1. `frontend/src/config/api.ts` íŒŒì¼ ì¡´ì¬ í™•ì¸
2. import ê²½ë¡œ í™•ì¸
3. `npm install` ì¬ì‹¤í–‰

---

## 9ï¸âƒ£ ë¹„ìš© ì˜ˆìƒ

### ë¬´ë£Œ (í˜„ì¬ êµ¬ì„±)

- **GitHub Pages**: ë¬´ë£Œ
- **GitHub Actions**: ë¬´ë£Œ (ì›” 2,000ë¶„)
- **Render.com**: ë¬´ë£Œ (750ì‹œê°„/ì›”, Cold Start ìˆìŒ)
- **Supabase**: ë¬´ë£Œ (500MB DB)

### ì´ ë¹„ìš©: $0/ì›” ğŸ‰

### í”„ë¦¬ë¯¸ì—„ ê³ ë ¤ ì‹œ

- **Render.com Starter**: $7/ì›” (Cold Start ì—†ìŒ)
- **Supabase Pro**: $25/ì›” (8GB DB)

---

## ğŸ¯ ë°°í¬ ìˆœì„œ ìš”ì•½

```bash
# 1. íŒŒì¼ ì¶”ê°€/ìˆ˜ì • (6ê°œ)
- .github/workflows/daily-crawl.yml
- frontend/src/config/api.ts
- frontend/.env.production
- frontend/src/route/home/home.tsx (ìˆ˜ì •)
- backend/backend/app/main.py (CORS ìˆ˜ì •)
- render.yaml (ì„ íƒ)

# 2. Git ì»¤ë°‹ & í‘¸ì‹œ
git add .
git commit -m "Add deployment configs"
git push

# 3. GitHub Secrets ë“±ë¡
- SUPABASE_URL
- SUPABASE_SERVICE_ROLE_KEY

# 4. Render.com ë°°í¬
- ë°±ì—”ë“œ ë°°í¬
- í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

# 5. í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ & ë°°í¬
cd frontend
npm run build
npm run deploy

# 6. ë™ì‘ í™•ì¸
- ë°±ì—”ë“œ: https://short-man-backend.onrender.com/health
- í”„ë¡ íŠ¸ì—”ë“œ: https://devhortman.github.io/short-man/
- Actions: GitHub Actions íƒ­ í™•ì¸
```

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì½”ë“œ
- [ ] `.github/workflows/daily-crawl.yml` ì¶”ê°€
- [ ] `frontend/src/config/api.ts` ì¶”ê°€
- [ ] `frontend/.env.production` ì¶”ê°€
- [ ] `home.tsx` API URL ìˆ˜ì •
- [ ] `main.py` CORS ìˆ˜ì •
- [ ] Git ì»¤ë°‹ & í‘¸ì‹œ

### GitHub
- [ ] Secrets ë“±ë¡ (2ê°œ)
- [ ] Actions í™œì„±í™”
- [ ] ìˆ˜ë™ ì‹¤í–‰ í…ŒìŠ¤íŠ¸

### Render.com
- [ ] ë°±ì—”ë“œ ë°°í¬
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] Health Check í™•ì¸

### GitHub Pages
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
- [ ] GitHub Pages ë°°í¬
- [ ] Pages í™œì„±í™”

### ë™ì‘ í™•ì¸
- [ ] ë°±ì—”ë“œ API ì‘ë‹µ
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ë¡œë”©
- [ ] 36ê°œ ì¹´ë“œ ì¶œë ¥
- [ ] ì¹´ë“œ í´ë¦­ ë™ì‘
- [ ] ë°˜ì‘í˜• ë™ì‘
- [ ] í¬ë¡¤ëŸ¬ ìë™ ì‹¤í–‰

---

**ëª¨ë“  íŒŒì¼ ì¤€ë¹„ ì™„ë£Œ!** ğŸ‰

ìœ„ ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ì‹œë©´ ë°°í¬ ì™„ë£Œë©ë‹ˆë‹¤!
